#!/bin/sh

# Author: Alexander Voigt

packagename="@PKGNAME@"
version="@FLEXIBLESUSY_VERSION@"

algorithms="@ALGORITHMS@"
addons="@ADDONS@"
blaslibs="@BLASLIBS@"
boostflags="@BOOSTFLAGS@"
boosttestlibs="@BOOSTTESTLIBS@"
boostthreadlibs="@BOOSTTHREADLIBS@"
cppflags="@CPPFLAGS@"
cxx="@CXX@"
cxxflags="@CXXFLAGS@"
eigenflags="@EIGENFLAGS@"
fc="@FC@"
fflags="@FFLAGS@"
flibs="@FLIBS@"
gslflags="@GSLFLAGS@"
gsllibs="@GSLLIBS@"
lapacklibs="@LAPACKLIBS@"
ldflags="@LDFLAGS@"
ldlibs="@LDLIBS@"
loopfuncflags="@LOOPFUNCFLAGS@"
loopfunclibs="@LOOPFUNCLIBS@"
math="@MATH@"
models="@MODELS@"
module_make_lib_cmd="@MODULE_MAKE_LIB_CMD@"
module_lib_ext="@MODULE_LIBEXT@"
shared_lib_cmd="@SHARED_LIB_CMD@"
sqliteflags="@SQLITEFLAGS@"
sqlitelibs="@SQLITELIBS@"
static_lib_cmd="@STATIC_LIB_CMD@"
threadlibs="@THREADLIBS@"
tsilflags="@TSILFLAGS@"
tsillibs="@TSILLIBS@"

help() {
cat <<EOF
Usage: `basename $0` [options]
Options:
  --algorithms          Print all algorithms that are used
  --addons              Print all addons that are build
  --blaslibs            Print BLAS libraries
  --boostflags          Print compiler flags for BOOST
  --boosttestlibs       Print BOOST test libraries
  --boostthreadlibs     Print BOOST thread libraries
  --cppflags            Print C preprocessor flags, CPPFLAGS
  --cxx                 Print C++ compiler, CXX
  --cxxflags            Print C++ compiler flags, CXXFLAGS
  --eigenflags          Print compiler flags for Eigen
  --fc                  Print Fortran compiler, FC
  --fflags              Print Fortran flags, FFLAGS
  --flibs               Print Fortran libraries, FLIBS
  --gslflags            Print compiler flags for GSL, GSLFLAGS
  --gsllibs             Print GSL libraries, GSLLIBS
  --lapacklibs          Print LAPACK libraries, LAPACKLIBS
  --ldflags             Print flags for optional libraries, LDFLAGS
  --ldlibs              Print optional libraries, LDLIBS
  --loopfuncflags       Print compiler flags for loop function library
  --loopfunclibs        Print loop function libraries
  --math-cmd            Print Mathematica kernel command
  --models              Print all models that are build
  --module-make-lib-cmd Print command to build module libraries
  --module-lib-ext      Print file name extension for module libraries
  --shared-lib-cmd      Print command to build shared library
  --sqliteflags         Print SQLite flags, SQLITEFLAGS
  --sqlitelibs          Print SQLite libararies, SQLITELIBS
  --static-lib-cmd      Print command to build static library
  --threadlibs          Print thread library, THREADLIBS
  --tsilflags           Print TSIL flags, TSILFLAGS
  --tsillibs            Print TSIL libraries, TSILLIBS
  --with-<addon>        Test if <addon> is compiled in
  --with-<model>        Test if <model> is compiled in
  --version             Print the $packagename version
  --help                Print this message
EOF
}

out=""

while test $# -gt 0; do
    case "$1" in
        -*=*) optarg=`echo "$1" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
        *)    optarg= ;;
    esac

    case $1 in
        --addons)              out="$out $addons" ;;
        --algorithms)          out="$out $algorithms" ;;
        --blaslibs)            out="$out $blaslibs" ;;
        --boostflags)          out="$out $boostflags" ;;
        --boosttestlibs)       out="$out $boosttestlibs" ;;
        --boostthreadlibs)     out="$out $boostthreadlibs" ;;
        --cppflags)            out="$out $cppflags" ;;
        --cxx)                 out="$out $cxx" ;;
        --cxxflags)            out="$out $cxxflags" ;;
        --eigenflags)          out="$out $eigenflags" ;;
        --fc)                  out="$out $fc" ;;
        --fflags)              out="$out $fflags" ;;
        --flibs)               out="$out $flibs" ;;
        --gslflags)            out="$out $gslflags" ;;
        --gsllibs)             out="$out $gsllibs" ;;
        --lapacklibs)          out="$out $lapacklibs" ;;
        --ldflags)             out="$out $ldflags" ;;
        --ldlibs)              out="$out $ldlibs" ;;
        --loopfuncflags)       out="$out $loopfuncflags" ;;
        --loopfunclibs)        out="$out $loopfunclibs" ;;
        --math-cmd)            out="$out $math" ;;
        --models)              out="$out $models" ;;
        --module-make-lib-cmd) out="$out $module_make_lib_cmd" ;;
        --module-lib-ext)      out="$out $module_lib_ext" ;;
        --shared-lib-cmd)      out="$out $shared_lib_cmd" ;;
        --sqliteflags)         out="$out $sqliteflags" ;;
        --sqlitelibs)          out="$out $sqlitelibs" ;;
        --static-lib-cmd)      out="$out $static_lib_cmd" ;;
        --threadlibs)          out="$out $threadlibs" ;;
        --tsilflags)           out="$out $tsilflags" ;;
        --tsillibs)            out="$out $tsillibs" ;;
        --with-*)
      ### Check for model
            f=`echo $1 | sed 's/--with-//'`
            for c in $models $addons ; do
                if test "x`basename $c`" = "x$f" ; then
                    out="$out yes"
                    break
                fi
                c=""
            done
            if test "x$c" = "x" ; then
                out="$out no"
            fi
            ;;
        --version)       out="$out $version"  ;;
        --help)
      ### Print a help message
            help
            exit 0
            ;;
        *)
      ### Give an error
            echo "Unknown argument: $1" 1>&2
            help
            exit 1
            ;;
    esac
    shift
done

### Output the stuff
echo $out
